:root{
  --bg:#f5f6f7; --card:#ffffff; --txt:#1f2937; --muted:#6b7280;
  --primary:#2563eb; --primary-600:#1d4ed8;
  --ok:#16a34a; --warn:#f59e0b; --fail:#dc2626; --eu:#8b5cf6;
  --border:#e5e7eb;
}
[data-theme="dark"]{
  --bg:#0f172a; --card:#111827; --txt:#e5e7eb; --muted:#9ca3af;
  --primary:#60a5fa; --primary-600:#3b82f6;
  --ok:#22c55e; --warn:#fbbf24; --fail:#ef4444; --eu:#a78bfa;
  --border:#374151;
}
*{box-sizing:border-box}
html,body{height:100%}
body{margin:0; font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Helvetica,Arial,sans-serif; color:var(--txt); background:var(--bg);}
[hidden]{display:none!important;}

.app-header{display:flex; align-items:center; justify-content:space-between; padding:14px 18px; background:var(--card); border-bottom:1px solid var(--border); position:sticky; top:0; z-index:5;}
.app-header h1{margin:0; font-size:20px;}
.modes{display:flex; gap:8px;}
.tab-btn{border:1px solid var(--border); background:var(--card); color:var(--txt); padding:6px 10px; border-radius:8px; cursor:pointer;}
.tab-btn.active{border-color:var(--primary); color:#fff; background:var(--primary);}
.header-actions button{margin-left:8px;}

.update-banner{background:#f97316; color:#111827; padding:10px; display:flex; align-items:center; gap:10px;}
.update-banner button{background:#fff; border:1px solid #fff; padding:4px 10px; border-radius:6px; cursor:pointer;}

main{max-width:1020px; margin:20px auto; padding:0 14px;}
.panel{background:var(--card); border:1px solid var(--border); border-radius:12px; padding:16px; margin:18px 0; box-shadow:0 1px 2px rgba(0,0,0,.03);}
.row{display:flex; align-items:center; gap:10px; margin:10px 0;}
.row.wrap{flex-wrap:wrap;}

input,select,textarea,button{font:inherit; color:inherit;}
input,select,textarea{border:1px solid var(--border); background:var(--card); color:var(--txt); padding:6px 8px; border-radius:8px;}
button{background:var(--primary); color:#fff; border:1px solid var(--primary); padding:8px 12px; border-radius:10px; cursor:pointer;}
button.secondary{background:transparent; color:var(--txt); border-color:var(--border);}
button.danger{background:var(--fail); border-color:var(--fail);}
button:disabled{opacity:.6; cursor:not-allowed;}

.card{border:1px solid var(--border); border-radius:12px; padding:12px; background:var(--card);}

.table-wrap{overflow-x:auto;}
table{width:100%; border-collapse:collapse; font-size:14px;}
th,td{padding:8px 10px; border-bottom:1px solid var(--border); vertical-align:middle;}
thead th{position:sticky; top:0; background:var(--card); z-index:1; text-align:left;}
tfoot td{font-weight:600;}

.status{display:inline-flex; align-items:center; gap:6px; padding:2px 8px; border-radius:999px; border:1px solid var(--border);}
.status.ok{color:#fff; background:var(--ok); border-color:var(--ok);}
.status.warn{color:#111; background:var(--warn); border-color:var(--warn);}
.status.fail{color:#fff; background:var(--fail); border-color:var(--fail);}
.status.eu{color:#fff; background:var(--eu); border-color:var(--eu);}
.status.spec{color:#111; background:#fde68a; border-color:#f59e0b;}

.src-note{color:var(--muted); font-style:italic; font-size:12px; margin-left:6px;}
.cas-chip{display:inline-block; margin-left:6px; padding:2px 6px; border-radius:8px; border:1px dashed var(--border); font-size:12px; color:var(--muted);}

.spec-help{display:inline-grid; place-items:center; width:18px; height:18px; border-radius:50%; border:1px solid var(--border); font-weight:700; cursor:default; margin-left:6px;}
.spec-help[data-tip]{position:relative;}
.spec-help[data-tip]:hover::after{content:attr(data-tip); position:absolute; left:50%; transform:translateX(-50%); bottom:130%; white-space:pre-wrap; max-width:320px; padding:8px 10px; border-radius:8px; background:var(--card); color:var(--txt); border:1px solid var(--border); box-shadow:0 4px 16px rgba(0,0,0,.1);}

.ac-wrap{position:relative;}
.ac-list{position:absolute; left:0; right:0; top:calc(100% + 4px); background:var(--card); border:1px solid var(--border); border-radius:10px; max-height:240px; overflow:auto; z-index:10;}
.ac-item{padding:6px 10px; cursor:pointer;}
.ac-item:hover, .ac-item.active{background:rgba(37,99,235,.10);}
.ac-item mark{background:transparent; color:var(--primary); font-weight:600;}

.app-footer{text-align:left; color:var(--muted); font-size:12px; padding:10px 14px;}
